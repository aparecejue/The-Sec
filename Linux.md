# Linux
## Introduction
### 内核的功能
1. **系统内存管理**
   1. 管理可用物理内存
   2. 创建和管理虚拟内存
     - 通过硬盘上的存储空间来实现虚拟内存，该区域称为**交换分区(swap space)**，内核不断在交换分区和实际物理内存之间反复交换虚拟内存中的数据。
     - 内存存储单元按组分成很多块，分成的块称为**页面**，内核会维护一个内存页面表，指明每个页面所在的位置
     - 内核会记录未在使用的内存页面，并自动把一段时间未访问的内存页面复制到交换交换空间，称为**换出**
2. **软件程序管理**
   1. 运行中的程序称为**进程**
   2. 内核创建了第一个进程(init进程)来启动系统上其他进程。内核启动时，会将init进程加载到虚拟内存。
   3. 运行级别
      0. 停机
      1. 单用户模式，只启动基本的系统进程以及一个控制台终端进程。一般管理员登陆
      2. 多用户模式，无NFS,不启用网络
      3. 启动大多数应用程序，比如网络支持程序，命令行窗口
      4. 未定义
      5. 启动x window图形化窗口
3. **硬件设备管理**
   1. 任何需要与Linux系统通信的设备都要在内核代码中加入驱动程序代码。
   2. 插入设备驱动代码的方法
      1. 编译进内核的设备驱动代码
      2. 可插入内核的设备驱动模块
   3. Linux系统将硬件设备当作特殊的文件，称为**设备文件**
      1. 字符型设备文件
         - 处理数据时每次只能处理一个字符的设备。
      2. 块设备文件
         - 处理数据时每次能处理大块数据的设备。 
      3. 网络设备文件 
         - 采用数据包发送和接收数据的设备。
    4. Linux为系统上的每个设备都创建了一种称为**节点**的特殊文件。与设备的所有通信都通过设备节点完成。每个皆都都有唯一的数值对供Linux内核标记。数值对包括一个主设备好和一个次设备号。次设备号用于标识主设备下的某个特定设备。 
4. **文件系统管理**
    1. 内核必须在编译时就加入对所有可能用到的文件系统的支持。
    2. Linux内核采用虚拟文件系统(VFS)作为和每个文件系统交互的接口。当每个文件系统都被挂载和使用时，VFS将信息都缓存在内存中。
### GUN工具
1. 核心GUN工具
   1. 用以处理文件的工具
   2. 用以操作文本的工具
   3. 用以管理进程的工具
2. shell
   1. 为用户提供了启动程序，管理文件系统中的文件以及运行在Linux系统上的进程的途径。
   2. shell的核心是**命令提示符**。
   3. 可以将多个shell命令放入文件中作为程序执行。这些文件被称作**shell脚本**
## shell
### 虚拟控制台(tty)
1. setterm -inversescreen on/off //交换背景色和前景色
2. setterm -foreground color(black,red,green,yellow,blue,magenta,cyan,white)  //修改前景色
3. setterm -background color(black,red,green,yellow,blue,magenta,cyan,white)  //修改背景色
4. setterm -reset  //外观恢复默认并清屏
5. setterm -store  //外观恢复默认不清屏
## shell指令
### 启动shell
1. /etc/passwd文件包含了所有系统用户账户列表以及每个用户的基本配置信息。
   - 每条七个字段，字段之间用冒号隔开，最后一个字段指定了用户使用的shell程序。即用户登陆后会默认启用该shell程序。
2. 默认的提示符是$，表示在等待用户输入。超级用户为#
3. 查看帮助
   1. man +command
      1. bash手册，手册页是由分页程序显示的，‘空格’翻页，‘回车’查看，‘箭头’滚动，‘q’退出
         <Linux手册惯用节名>
      2. man -k '关键字' 查找有关命令
      3. 手册有对应的内容区域，每个区域有一个区域号,man提供命令所对应的最低编号的内容
         man 区域号 +command 
         <Linux手册页的内容区域>
   2. info +command
   3. command --help
### 浏览文件系统
1. Linux文件系统
   1. Linux将文件存储在单个目录结构中，这个目录被称为**虚拟目录**。虚拟目录将安装在PC上的所有存储设备的文件路径纳入单个目录结构中。
   2. Linux虚拟目录结构之包含一个称为根(/)目录的基础目录。
   3. Linux上安装的第一块磁盘称为**根驱动器**。根驱动器包含了驱动目录的核心，其他目录都是从那里开始构建的。
   4. Linux会在根驱动器上创建一些特别的目录，称为**挂载点**。挂载点是虚拟目录中用以分配额外存储设备的目录。虚拟目录会让文件和目录出现在这些挂载点目录中。
      <Linux目录名称> 
   5. 会话将从主目录开始。主目录是分配给用户账户的一个特有目录。用户账户在创建后，系统通常为其分配一个特有的目录。
2. 遍历目录
   1. cd destination 切换目录，若不加参数切换为工作目录。
   2. pwd 显示shell会话的当前目录，这个目录被称为当前工作目录。
### 文件和目录列表
1. ls
  1. 默认按照字母顺序排序。
  2. -F参数，可执行文件后加(*)，目录后加(/)。
  3. -a 显示隐藏文件和，目录(文件名以点开始)，Linux经常采用隐藏文件来保持配置信息。
  4. -R 递归选项。列出当前目录下包含的子目录的文件。
  5. -d 只列出目录本身的信息，不列出其中的内容
  6. -i 输出文件或目录的inode编号,**inode编号**:文件和目录的于标识的唯一数字。
  7. -l 按长格式输出，显示附加信息
     1. 文件类型
     2. 文件权限
     3. 硬链接总数
     4. 所属用户用户名
     5. 所属用户用户组
     6. 文件大小(字节单位)
     7. 上次修改时间
     8. 文件名或目录名 
2. 文件扩展匹配
   在过滤器中使用通配符进行模式匹配的过程
   1. **(元字符通配符)通配符**
      1. ?,表示一个字符
      2. *,表示零个或多个字符
      3. [],表示一个字符的多个可能选择
      4. !,排除不需要的内容
### 处理文件
1. 创建文件
   1. touch 创建指定的新文件，并将当前用户作为所属用户，若已创建则将文件的修改时间改为当前时间
   2. -a 将访问时间改为当前时间
   3. -l 默认显示的时间是修改时间，ctime
   4. --time==atime 显示访问时间
2. 复制文件
   1. cp source destination
   2. 新文件有新的修改时间
   3. -i,若已存在则提示
   4. -R,可递归地复制整个目录的内容
3. 链接文件
   1. **链接**，物理文件副本和虚拟副本，是目录中指向文件真实位置的占位符
   2. 类型
      1. 符号链接
         1. 是一个文件，指向存放在虚拟目录结构中某个地方的另一个文件。
         2. 两个文件通过符号链接到一起，其中的内容并不相同
         3. 符号链接的文件大小与数据文件的文件大小不同。
         4. 两个文件的inode编号不同
         5. 原文件不存在后，无法使用
         6. 链接数为1
      2. 硬链接
         1. 创建的独立的虚拟文件，其中包含了原始文件的信息及位置。
         2. 共享inode编号，从根本上就是原来的文件。
         3. 引用硬链接文件等同于引用原文件。
         4. 原文件不存在后仍能使用。
         5. 链接数与原文件相同
   3. 创建
      1. 创建符号链接
         1. 原始文件必须存在
         2. ln -s 
      2. 创建硬链接
         1. 原始文件必须存在
         2. ln
   只能对同一存储媒体的文件创建硬件链接，要在不同存储媒体的文件之间创建链接只能使用符号链接。 
4. 重命名文件
   1. mv
      1. inode编号和时间戳保持不变。
      2. -i 目标目录存在同名文件时提示
5. 删除文件
   1. rm
      1. -i 询问是否删除
      2. -f 批量删除文件且不受提示符打扰。
   2. 可以使用通配符
### 处理目录